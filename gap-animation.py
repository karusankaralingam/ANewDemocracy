import pandas as pd
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation

# Data from the table
data = {
    "Year": [
        1967, 1969, 1971, 1973, 1975, 1977, 1979, 1981, 1983, 1985,
        1987, 1989, 1991, 1993, 1995, 1997, 1999, 2001, 2003, 2005,
        2007, 2009, 2011, 2013, 2015, 2017, 2019, 2021, 2023
    ],
    "D": [
        -0.093603175, -0.072308442, -0.097825397, -0.091867987, -0.142692958,
        -0.13105, -0.091469208, -0.05865529, -0.065044025, -0.05,
        -0.055290221, -0.056283489, -0.042911585, -0.044762346, 0.007715953,
        -0.007511628, 0.008076923, -0.004530303, -0.019566406, -0.022862903,
        -0.046155405, -0.069125, -0.01165748, -0.033801527, -0.005434043,
        -0.020745968, -0.065885017, -0.048680851, -0.065033582
    ],
    "R": [
        -0.033982301, -0.039659836, -0.029203463, -0.028291667, -0.072870968,
        -0.080410811, -0.062460396, 0.023701195, -0.01465625, -0.001312236,
        -0.02070354, -0.021022026, -0.078162791, -0.039435556, 0.068463918,
        0.070954545, 0.060032028, 0.066200717, 0.093904594, 0.111965753,
        0.072247104, 0.048414097, 0.148491468, 0.168475524, 0.189134426,
        0.19645098, 0.173608365, 0.171, 0.208924188
    ],
    "gap": [
        -0.059620874, -0.032648605, -0.068621934, -0.06357632, -0.06982199,
        -0.050639189, -0.029008812, -0.082356485, -0.050387775, -0.048687764,
        -0.034586681, -0.035261463, 0.035251205, -0.00532679, -0.060747964,
        -0.078466173, -0.051955105, -0.07073102, -0.113471, -0.134828657,
        -0.11840251, -0.117539097, -0.160148948, -0.202277051, -0.194568469,
        -0.217196948, -0.239493382, -0.219680851, -0.27395777
    ]
}

# Create DataFrame
df = pd.DataFrame(data)

# Initialize the plot
fig, ax = plt.subplots()
ax.set_xlim(min(df['Year']), max(df['Year']))
ax.set_ylim(min(min(df['D']), min(df['R']), min(df['gap'])) - 0.1, max(max(df['D']), max(df['R']), max(df['gap'])) + 0.1)

line_D, = ax.plot([], [], 'bo-', label='D')
line_R, = ax.plot([], [], 'ro-', label='R')
line_gap, = ax.plot([], [], 'go-', label='Gap')
ax.legend()

# Animation function
def animate(i):
    x = df['Year'][:i+1]
    y1 = df['D'][:i+1]
    y2 = df['R'][:i+1]
    y3 = df['gap'][:i+1]
    
    line_D.set_data(x, y1)
    line_R.set_data(x, y2)
    line_gap.set_data(x, y3)
    return line_D, line_R, line_gap

# Create animation
ani = FuncAnimation(fig, animate, frames=len(df), interval=200, blit=True)

# Save animation
ani.save('/mnt/data/political_gap_animation.gif', writer='imagemagick')

# Display the animated plot
plt.close()
ani

